{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{\"0dNq\":function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__);var common=__webpack_require__(\"ofXK\"),router=__webpack_require__(\"tyNb\"),moment=__webpack_require__(\"wd/R\"),core=__webpack_require__(\"fXoL\"),api_service=__webpack_require__(\"H+bZ\"),util_service=__webpack_require__(\"2Rin\"),angular_bootstrap_md=__webpack_require__(\"dbUT\"),fesm2015_forms=__webpack_require__(\"3Pt+\"),ngx_skeleton_loader=__webpack_require__(\"xJkR\");const _c0=[\"basicModal\"],_c1=[\"scrollMe\"];function ChatsComponent_div_12_Template(rf,ctx){if(1&rf&&(core[\"ɵɵelementStart\"](0,\"div\",28),core[\"ɵɵelementStart\"](1,\"div\",29),core[\"ɵɵelementStart\"](2,\"span\",30),core[\"ɵɵtext\"](3),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"]()),2&rf){const ctx_r1187=core[\"ɵɵnextContext\"]();core[\"ɵɵadvance\"](3),core[\"ɵɵtextInterpolate\"](ctx_r1187.util.translate(\"Loading...\"))}}function ChatsComponent_span_15_div_1_Template(rf,ctx){if(1&rf&&(core[\"ɵɵelementStart\"](0,\"div\",33),core[\"ɵɵelementStart\"](1,\"div\",34),core[\"ɵɵelementStart\"](2,\"div\",35),core[\"ɵɵelementStart\"](3,\"p\"),core[\"ɵɵtext\"](4),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"]()),2&rf){const item_r1193=core[\"ɵɵnextContext\"]().$implicit;core[\"ɵɵadvance\"](4),core[\"ɵɵtextInterpolate\"](item_r1193.message)}}function ChatsComponent_span_15_div_2_Template(rf,ctx){if(1&rf&&(core[\"ɵɵelementStart\"](0,\"div\",36),core[\"ɵɵelementStart\"](1,\"div\",34),core[\"ɵɵelementStart\"](2,\"div\",35),core[\"ɵɵelementStart\"](3,\"p\"),core[\"ɵɵtext\"](4),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"]()),2&rf){const item_r1193=core[\"ɵɵnextContext\"]().$implicit;core[\"ɵɵadvance\"](4),core[\"ɵɵtextInterpolate\"](item_r1193.message)}}function ChatsComponent_span_15_Template(rf,ctx){if(1&rf&&(core[\"ɵɵelementStart\"](0,\"span\"),core[\"ɵɵtemplate\"](1,ChatsComponent_span_15_div_1_Template,5,1,\"div\",31),core[\"ɵɵtemplate\"](2,ChatsComponent_span_15_div_2_Template,5,1,\"div\",32),core[\"ɵɵelementEnd\"]()),2&rf){const item_r1193=ctx.$implicit,ctx_r1189=core[\"ɵɵnextContext\"]();core[\"ɵɵadvance\"](1),core[\"ɵɵproperty\"](\"ngIf\",item_r1193.from_id!=ctx_r1189.uid),core[\"ɵɵadvance\"](1),core[\"ɵɵproperty\"](\"ngIf\",item_r1193.from_id==ctx_r1189.uid)}}function ChatsComponent_div_16_Template(rf,ctx){if(1&rf&&(core[\"ɵɵelementStart\"](0,\"div\",37),core[\"ɵɵelementStart\"](1,\"div\",29),core[\"ɵɵelementStart\"](2,\"span\",30),core[\"ɵɵtext\"](3),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"]()),2&rf){const ctx_r1190=core[\"ɵɵnextContext\"]();core[\"ɵɵadvance\"](3),core[\"ɵɵtextInterpolate\"](ctx_r1190.util.translate(\"Loading...\"))}}const _c2=function(a0){return{\"background-image\":a0}};function ChatsComponent_div_34_Template(rf,ctx){if(1&rf){const _r1200=core[\"ɵɵgetCurrentView\"]();core[\"ɵɵelementStart\"](0,\"div\",23),core[\"ɵɵlistener\"](\"click\",(function(){core[\"ɵɵrestoreView\"](_r1200);const item_r1198=ctx.$implicit;return core[\"ɵɵnextContext\"]().onChat(item_r1198)})),core[\"ɵɵelementStart\"](1,\"div\",24),core[\"ɵɵelement\"](2,\"div\",25),core[\"ɵɵelementStart\"](3,\"p\",26),core[\"ɵɵtext\"](4),core[\"ɵɵelement\"](5,\"br\"),core[\"ɵɵelementStart\"](6,\"span\",38),core[\"ɵɵtext\"](7),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"]()}if(2&rf){const item_r1198=ctx.$implicit,ctx_r1191=core[\"ɵɵnextContext\"]();core[\"ɵɵadvance\"](2),core[\"ɵɵproperty\"](\"ngStyle\",core[\"ɵɵpureFunction1\"](3,_c2,\"url(\"+ctx_r1191.api.mediaURL+item_r1198.cover+\")\")),core[\"ɵɵadvance\"](2),core[\"ɵɵtextInterpolate1\"](\" \",item_r1198.name,\" \"),core[\"ɵɵadvance\"](3),core[\"ɵɵtextInterpolate\"](item_r1198.mobile)}}const _c3=function(){return{\"border-radius\":\"5px\",height:\"120px\",width:\"100%\"}};function ChatsComponent_div_35_div_2_Template(rf,ctx){1&rf&&(core[\"ɵɵelementStart\"](0,\"div\",41),core[\"ɵɵelement\"](1,\"ngx-skeleton-loader\",42),core[\"ɵɵelementEnd\"]()),2&rf&&(core[\"ɵɵadvance\"](1),core[\"ɵɵproperty\"](\"theme\",core[\"ɵɵpureFunction0\"](1,_c3)))}const _c4=function(){return[1,2,3,4,5,6,7,8]};function ChatsComponent_div_35_Template(rf,ctx){1&rf&&(core[\"ɵɵelementStart\"](0,\"div\"),core[\"ɵɵelementStart\"](1,\"div\",39),core[\"ɵɵtemplate\"](2,ChatsComponent_div_35_div_2_Template,2,2,\"div\",40),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"]()),2&rf&&(core[\"ɵɵadvance\"](2),core[\"ɵɵproperty\"](\"ngForOf\",core[\"ɵɵpureFunction0\"](1,_c4)))}const _c5=function(){return{backdrop:!0,ignoreBackdropClick:!0}},_c6=function(){return{\"background-image\":\"url(assets/placeholder.png)\"}},routes=[{path:\"\",component:(()=>{class ChatsComponent{constructor(api,util,router){this.api=api,this.util=util,this.router=router,this.dummy=[],this.users=[],this.msg=\"\",this.messages=[],this.uid=localStorage.getItem(\"uid\"),this.getChats()}ngOnInit(){}getChats(){const param={id:localStorage.getItem(\"uid\")};this.dummy=Array(10),this.api.post(\"chats/getByGroup\",param).then(data=>{if(console.log(data),data&&200===data.status){const info=[];data.data.forEach(element=>{info.push(element.from_id),info.push(element.room_id)});let uniq=[...new Set(info)];uniq=uniq.filter(x=>x!==localStorage.getItem(\"uid\")),console.log(\"uniq->>\",uniq);const uid={id:uniq.join()};this.api.post(\"stores/getChatsNames\",uid).then(uids=>{this.dummy=[],console.log(uids),uids&&200===uids.status&&(this.users=uids.data)},error=>{console.log(error),this.users=[],this.dummy=[],this.util.errorMessage(this.util.translate(\"Something went wrong\"))})}else this.dummy=[]},error=>{console.log(error),this.util.errorMessage(this.util.translate(\"Something went wrong\"))})}onAdmin(){this.id=0,this.loaded=!1,this.name=\"Support\",this.getInbox(),this.interval=setInterval(()=>{console.log(\"calling in interval\"),this.getInbox()},12e3),this.basicModal.show()}onChat(item){console.log(localStorage.getItem(\"uid\")),this.id=item.id,this.loaded=!1,this.name=item.name,this.getInbox(),this.interval=setInterval(()=>{console.log(\"calling in interval\"),this.getInbox()},12e3),this.basicModal.show()}getInbox(){this.api.post(\"chats/getById\",{id:this.id+\"_\"+this.uid,oid:this.id}).then(data=>{console.log(data),this.loaded=!0,this.yourMessage=!0,data&&200===data.status&&(this.messages=data.data,this.scrollToBottom())},error=>{console.log(error),this.loaded=!0,this.yourMessage=!0,this.util.errorMessage(this.util.translate(\"Something went wrong\"))})}scrollToBottom(){console.log(this.scrollMe.nativeElement.scrollTop),this.scrollMe.nativeElement.scrollTop=this.scrollMe.nativeElement.scrollHeight,console.log(this.scrollMe.nativeElement.scrollTop)}closeModal(){clearInterval(this.interval),this.basicModal.hide()}sendMessage(){if(console.log(this.msg),!this.msg||\"\"===this.msg)return!1;const msg=this.msg;this.msg=\"\";const param={room_id:this.id,uid:this.id+\"_\"+this.uid,from_id:this.uid,message:msg,message_type:\"users\",status:1,timestamp:moment().format(\"YYYY-MM-DD HH:mm:ss\")};this.yourMessage=!1,this.api.post(\"chats/save\",param).then(data=>{console.log(data),data&&200===data.status?this.getInbox():this.yourMessage=!0},error=>{console.log(error),this.yourMessage=!0,this.util.errorMessage(this.util.translate(\"Something went wrong\"))})}}return ChatsComponent.ɵfac=function(t){return new(t||ChatsComponent)(core[\"ɵɵdirectiveInject\"](api_service.a),core[\"ɵɵdirectiveInject\"](util_service.a),core[\"ɵɵdirectiveInject\"](router.f))},ChatsComponent.ɵcmp=core[\"ɵɵdefineComponent\"]({type:ChatsComponent,selectors:[[\"app-chats\"]],viewQuery:function(rf,ctx){var _t;1&rf&&(core[\"ɵɵviewQuery\"](_c0,!0),core[\"ɵɵviewQuery\"](_c1,!0)),2&rf&&(core[\"ɵɵqueryRefresh\"](_t=core[\"ɵɵloadQuery\"]())&&(ctx.basicModal=_t.first),core[\"ɵɵqueryRefresh\"](_t=core[\"ɵɵloadQuery\"]())&&(ctx.scrollMe=_t.first))},decls:36,vars:15,consts:[[1,\"container\"],[\"mdbModal\",\"\",\"tabindex\",\"-1\",\"role\",\"dialog\",\"aria-labelledby\",\"myBasicModalLabel\",\"aria-hidden\",\"true\",1,\"modal\",\"fade\",\"bottom\",2,\"z-index\",\"99999\",3,\"config\"],[\"basicModal\",\"mdbModal\"],[\"role\",\"document\",1,\"modal-dialog\",\"modal-dialog-scrollable\"],[1,\"modal-content\"],[1,\"modal-header\"],[\"type\",\"button\",\"aria-label\",\"Close\",1,\"close\",\"pull-right\",3,\"click\"],[\"aria-hidden\",\"true\"],[\"id\",\"myModalLabel\",1,\"modal-title\",\"w-100\"],[1,\"modal-body\"],[\"style\",\"display: flex;flex-direction: column;justify-content: center;align-items: center;\",4,\"ngIf\"],[1,\"main_content_div\"],[\"scrollMe\",\"\"],[4,\"ngFor\",\"ngForOf\"],[\"style\",\"display: flex;flex-direction: row-reverse;padding: 20px;\",4,\"ngIf\"],[1,\"modal-footer\"],[2,\"width\",\"100%\"],[1,\"md-form\"],[\"type\",\"text\",\"id\",\"form8\",\"rows\",\"1\",\"mdbInput\",\"\",\"mdbValidate\",\"\",1,\"md-textarea\",\"form-control\",3,\"ngModel\",\"ngModelChange\"],[\"for\",\"form8\"],[\"type\",\"button\",\"mdbBtn\",\"\",\"color\",\"secondary\",\"aria-label\",\"Close\",\"mdbWavesEffect\",\"\",1,\"waves-light\",3,\"click\"],[\"type\",\"button\",\"mdbBtn\",\"\",\"color\",\"primary\",\"mdbWavesEffect\",\"\",1,\"relative\",\"waves-light\",3,\"click\"],[1,\"row\"],[1,\"col-12\",\"col-md-6\",2,\"cursor\",\"pointer\",3,\"click\"],[1,\"boxed\"],[1,\"img_div\",3,\"ngStyle\"],[1,\"name\"],[\"class\",\"col-12 col-md-6\",\"style\",\"cursor: pointer;\",3,\"click\",4,\"ngFor\",\"ngForOf\"],[2,\"display\",\"flex\",\"flex-direction\",\"column\",\"justify-content\",\"center\",\"align-items\",\"center\"],[\"role\",\"status\",1,\"spinner-border\",\"text-success\"],[1,\"sr-only\"],[\"class\",\"left_div\",4,\"ngIf\"],[\"class\",\"right_div\",4,\"ngIf\"],[1,\"left_div\"],[1,\"inner_div\"],[1,\"msg_div\"],[1,\"right_div\"],[2,\"display\",\"flex\",\"flex-direction\",\"row-reverse\",\"padding\",\"20px\"],[1,\"mbl\"],[1,\"row\",2,\"overflow\",\"hidden\"],[\"class\",\"col-12 col-md-6\",4,\"ngFor\",\"ngForOf\"],[1,\"col-12\",\"col-md-6\"],[3,\"theme\"]],template:function(rf,ctx){1&rf&&(core[\"ɵɵelementStart\"](0,\"div\",0),core[\"ɵɵelementStart\"](1,\"div\",1,2),core[\"ɵɵelementStart\"](3,\"div\",3),core[\"ɵɵelementStart\"](4,\"div\",4),core[\"ɵɵelementStart\"](5,\"div\",5),core[\"ɵɵelementStart\"](6,\"button\",6),core[\"ɵɵlistener\"](\"click\",(function(){return ctx.closeModal()})),core[\"ɵɵelementStart\"](7,\"span\",7),core[\"ɵɵtext\"](8,\"×\"),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](9,\"h4\",8),core[\"ɵɵtext\"](10),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](11,\"div\",9),core[\"ɵɵtemplate\"](12,ChatsComponent_div_12_Template,4,1,\"div\",10),core[\"ɵɵelementStart\"](13,\"div\",11,12),core[\"ɵɵtemplate\"](15,ChatsComponent_span_15_Template,3,2,\"span\",13),core[\"ɵɵelementEnd\"](),core[\"ɵɵtemplate\"](16,ChatsComponent_div_16_Template,4,1,\"div\",14),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](17,\"div\",15),core[\"ɵɵelementStart\"](18,\"div\",16),core[\"ɵɵelementStart\"](19,\"div\",17),core[\"ɵɵelementStart\"](20,\"textarea\",18),core[\"ɵɵlistener\"](\"ngModelChange\",(function($event){return ctx.msg=$event})),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](21,\"label\",19),core[\"ɵɵtext\"](22),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](23,\"div\"),core[\"ɵɵelementStart\"](24,\"button\",20),core[\"ɵɵlistener\"](\"click\",(function(){return ctx.closeModal()})),core[\"ɵɵtext\"](25),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](26,\"button\",21),core[\"ɵɵlistener\"](\"click\",(function(){return ctx.sendMessage()})),core[\"ɵɵtext\"](27),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementStart\"](28,\"div\",22),core[\"ɵɵelementStart\"](29,\"div\",23),core[\"ɵɵlistener\"](\"click\",(function(){return ctx.onAdmin()})),core[\"ɵɵelementStart\"](30,\"div\",24),core[\"ɵɵelement\"](31,\"div\",25),core[\"ɵɵelementStart\"](32,\"p\",26),core[\"ɵɵtext\"](33),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵelementEnd\"](),core[\"ɵɵtemplate\"](34,ChatsComponent_div_34_Template,8,5,\"div\",27),core[\"ɵɵelementEnd\"](),core[\"ɵɵtemplate\"](35,ChatsComponent_div_35_Template,3,2,\"div\",13),core[\"ɵɵelementEnd\"]()),2&rf&&(core[\"ɵɵadvance\"](1),core[\"ɵɵproperty\"](\"config\",core[\"ɵɵpureFunction0\"](13,_c5)),core[\"ɵɵadvance\"](9),core[\"ɵɵtextInterpolate1\"](\" \",ctx.name,\" \"),core[\"ɵɵadvance\"](2),core[\"ɵɵproperty\"](\"ngIf\",!ctx.loaded),core[\"ɵɵadvance\"](3),core[\"ɵɵproperty\"](\"ngForOf\",ctx.messages),core[\"ɵɵadvance\"](1),core[\"ɵɵproperty\"](\"ngIf\",!ctx.yourMessage&&ctx.loaded),core[\"ɵɵadvance\"](4),core[\"ɵɵproperty\"](\"ngModel\",ctx.msg),core[\"ɵɵadvance\"](2),core[\"ɵɵtextInterpolate1\"](\" \",ctx.util.translate(\"Type Here..\"),\" \"),core[\"ɵɵadvance\"](3),core[\"ɵɵtextInterpolate\"](ctx.util.translate(\"Close\")),core[\"ɵɵadvance\"](2),core[\"ɵɵtextInterpolate\"](ctx.util.translate(\"Send Message\")),core[\"ɵɵadvance\"](4),core[\"ɵɵproperty\"](\"ngStyle\",core[\"ɵɵpureFunction0\"](14,_c6)),core[\"ɵɵadvance\"](2),core[\"ɵɵtextInterpolate1\"](\" \",ctx.util.translate(\"Support\"),\" \"),core[\"ɵɵadvance\"](1),core[\"ɵɵproperty\"](\"ngForOf\",ctx.users),core[\"ɵɵadvance\"](1),core[\"ɵɵproperty\"](\"ngForOf\",ctx.dummy))},directives:[angular_bootstrap_md.r,common.NgIf,common.NgForOf,fesm2015_forms.a,angular_bootstrap_md.p,angular_bootstrap_md.q,fesm2015_forms.i,fesm2015_forms.l,angular_bootstrap_md.n,angular_bootstrap_md.v,common.NgStyle,ngx_skeleton_loader.a],styles:[\".boxed[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.boxed[_ngcontent-%COMP%]   .img_div[_ngcontent-%COMP%]{height:50px;width:50px;min-width:50px;background-position:50%;background-repeat:no-repeat;background-size:contain;position:relative;margin:5px}.boxed[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:13px;font-weight:700;margin:0 0 0 20px}.main_content_div[_ngcontent-%COMP%]{width:100%;padding:15px}.main_content_div[_ngcontent-%COMP%]   .back_image[_ngcontent-%COMP%]{width:45px;height:45px;border-radius:100%;background-position:50%;background-repeat:no-repeat;background-size:cover;min-width:45px}.main_content_div[_ngcontent-%COMP%]   .left_div[_ngcontent-%COMP%]{width:100%;display:flex;margin-bottom:15px}.main_content_div[_ngcontent-%COMP%]   .left_div[_ngcontent-%COMP%]   .inner_div[_ngcontent-%COMP%]{width:70%;display:flex;flex-direction:row;justify-content:flex-start}.main_content_div[_ngcontent-%COMP%]   .left_div[_ngcontent-%COMP%]   .msg_div[_ngcontent-%COMP%]{background:#f0eff5;display:flex;align-items:center;padding:10px 15px;border-radius:25px;margin-left:5px}.main_content_div[_ngcontent-%COMP%]   .right_div[_ngcontent-%COMP%]{display:flex;width:100%;margin-bottom:15px;justify-content:flex-end}.main_content_div[_ngcontent-%COMP%]   .right_div[_ngcontent-%COMP%]   .inner_div[_ngcontent-%COMP%]{width:70%;display:flex;flex-direction:row;justify-content:flex-end}.main_content_div[_ngcontent-%COMP%]   .right_div[_ngcontent-%COMP%]   .msg_div[_ngcontent-%COMP%]{background-color:#45c261!important;display:flex;align-items:center;padding:10px 15px;border-radius:25px;margin-right:5px;color:#fff}\"]}),ChatsComponent})()}];let chats_routing_module_ChatsRoutingModule=(()=>{class ChatsRoutingModule{}return ChatsRoutingModule.ɵmod=core[\"ɵɵdefineNgModule\"]({type:ChatsRoutingModule}),ChatsRoutingModule.ɵinj=core[\"ɵɵdefineInjector\"]({factory:function(t){return new(t||ChatsRoutingModule)},imports:[[router.h.forChild(routes)],router.h]}),ChatsRoutingModule})();var shared_module=__webpack_require__(\"PCNd\");__webpack_require__.d(__webpack_exports__,\"ChatsModule\",(function(){return chats_module_ChatsModule}));let chats_module_ChatsModule=(()=>{class ChatsModule{}return ChatsModule.ɵmod=core[\"ɵɵdefineNgModule\"]({type:ChatsModule}),ChatsModule.ɵinj=core[\"ɵɵdefineInjector\"]({factory:function(t){return new(t||ChatsModule)},imports:[[common.CommonModule,chats_routing_module_ChatsRoutingModule,shared_module.a,shared_module.a,angular_bootstrap_md.m.forRoot()]]}),ChatsModule})()}}]);","extractedComments":[]}